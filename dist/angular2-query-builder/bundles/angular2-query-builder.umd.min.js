!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/forms"),require("@angular/core"),require("@angular/common")):"function"==typeof define&&define.amd?define("angular2-query-builder",["exports","@angular/forms","@angular/core","@angular/common"],t):t((e=e||self)["angular2-query-builder"]={},e.ng.forms,e.ng.core,e.ng.common)}(this,(function(e,t,n,a){"use strict";var o=function(){function e(e){this.template=e}return e.ɵfac=function(t){return new(t||e)(n["ɵɵdirectiveInject"](n.TemplateRef))},e.ɵdir=n["ɵɵdefineDirective"]({type:e,selectors:[["","queryOperator",""]]}),e}(),r=function(){function e(e){this.template=e}return e.ɵfac=function(t){return new(t||e)(n["ɵɵdirectiveInject"](n.TemplateRef))},e.ɵdir=n["ɵɵdefineDirective"]({type:e,selectors:[["","queryField",""]]}),e}(),i=function(){function e(e){this.template=e}return e.ɵfac=function(t){return new(t||e)(n["ɵɵdirectiveInject"](n.TemplateRef))},e.ɵdir=n["ɵɵdefineDirective"]({type:e,selectors:[["","queryEntity",""]]}),e}(),l=function(){function e(e){this.template=e}return e.ɵfac=function(t){return new(t||e)(n["ɵɵdirectiveInject"](n.TemplateRef))},e.ɵdir=n["ɵɵdefineDirective"]({type:e,selectors:[["","querySwitchGroup",""]]}),e}(),s=function(){function e(e){this.template=e}return e.ɵfac=function(t){return new(t||e)(n["ɵɵdirectiveInject"](n.TemplateRef))},e.ɵdir=n["ɵɵdefineDirective"]({type:e,selectors:[["","queryButtonGroup",""]]}),e}(),p=function(){function e(e){this.template=e}return Object.defineProperty(e.prototype,"queryInputType",{get:function(){return this._type},set:function(e){e&&(this._type=e)},enumerable:!0,configurable:!0}),e.ɵfac=function(t){return new(t||e)(n["ɵɵdirectiveInject"](n.TemplateRef))},e.ɵdir=n["ɵɵdefineDirective"]({type:e,selectors:[["","queryInput",""]],inputs:{queryInputType:"queryInputType"}}),e}(),u=function(){function e(e){this.template=e}return e.ɵfac=function(t){return new(t||e)(n["ɵɵdirectiveInject"](n.TemplateRef))},e.ɵdir=n["ɵɵdefineDirective"]({type:e,selectors:[["","queryRemoveButton",""]]}),e}(),c=function(){function e(e){this.template=e}return e.ɵfac=function(t){return new(t||e)(n["ɵɵdirectiveInject"](n.TemplateRef))},e.ɵdir=n["ɵɵdefineDirective"]({type:e,selectors:[["","queryEmptyWarning",""]]}),e}(),d=function(){function e(e){this.template=e}return e.ɵfac=function(t){return new(t||e)(n["ɵɵdirectiveInject"](n.TemplateRef))},e.ɵdir=n["ɵɵdefineDirective"]({type:e,selectors:[["","queryArrowIcon",""]]}),e}(),g=["treeContainer"];function f(e,t){if(1&e&&n["ɵɵelement"](0,"i",0),2&e){var a=n["ɵɵnextContext"]();n["ɵɵproperty"]("ngClass",a.getClassNames("arrowIcon"))}}function h(e,t){1&e&&n["ɵɵelementContainer"](0)}function C(e,t){if(1&e&&(n["ɵɵelementContainerStart"](0),n["ɵɵtemplate"](1,h,1,0,"ng-container",10),n["ɵɵelementContainerEnd"]()),2&e){var a=t.ngIf,o=n["ɵɵnextContext"](2);n["ɵɵadvance"](1),n["ɵɵproperty"]("ngTemplateOutlet",a)("ngTemplateOutletContext",o.getArrowIconContext())}}function m(e,t){if(1&e){var a=n["ɵɵgetCurrentView"]();n["ɵɵelementStart"](0,"a",9),n["ɵɵlistener"]("click",(function(){return n["ɵɵrestoreView"](a),n["ɵɵnextContext"]().toggleCollapse()})),n["ɵɵtemplate"](1,C,2,2,"ng-container",3),n["ɵɵelementEnd"]()}if(2&e){var o=n["ɵɵnextContext"](),r=n["ɵɵreference"](2);n["ɵɵproperty"]("ngClass",o.getClassNames("arrowIconButton",o.data.collapsed?"collapsed":null)),n["ɵɵadvance"](1),n["ɵɵproperty"]("ngIf",o.getArrowIconTemplate())("ngIfElse",r)}}function y(e,t){1&e&&n["ɵɵelementContainer"](0)}function v(e,t){if(1&e&&(n["ɵɵelementContainerStart"](0),n["ɵɵelementStart"](1,"div",0),n["ɵɵtemplate"](2,y,1,0,"ng-container",10),n["ɵɵelementEnd"](),n["ɵɵelementContainerEnd"]()),2&e){var a=t.ngIf,o=n["ɵɵnextContext"]();n["ɵɵadvance"](1),n["ɵɵproperty"]("ngClass",o.getClassNames("buttonGroup","rightAlign")),n["ɵɵadvance"](1),n["ɵɵproperty"]("ngTemplateOutlet",a)("ngTemplateOutletContext",o.getButtonGroupContext())}}function x(e,t){if(1&e){var a=n["ɵɵgetCurrentView"]();n["ɵɵelementStart"](0,"button",11),n["ɵɵlistener"]("click",(function(){return n["ɵɵrestoreView"](a),n["ɵɵnextContext"](2).addRuleSet()})),n["ɵɵelement"](1,"i",0),n["ɵɵtext"](2," Ruleset "),n["ɵɵelementEnd"]()}if(2&e){var o=n["ɵɵnextContext"](2);n["ɵɵproperty"]("ngClass",o.getClassNames("button"))("disabled",o.disabled),n["ɵɵadvance"](1),n["ɵɵproperty"]("ngClass",o.getClassNames("addIcon"))}}function b(e,t){if(1&e){var a=n["ɵɵgetCurrentView"]();n["ɵɵelementContainerStart"](0),n["ɵɵelementStart"](1,"button",11),n["ɵɵlistener"]("click",(function(){return n["ɵɵrestoreView"](a),n["ɵɵnextContext"](2).removeRuleSet()})),n["ɵɵelement"](2,"i",0),n["ɵɵelementEnd"](),n["ɵɵelementContainerEnd"]()}if(2&e){var o=n["ɵɵnextContext"](2);n["ɵɵadvance"](1),n["ɵɵproperty"]("ngClass",o.getClassNames("button","removeButton"))("disabled",o.disabled),n["ɵɵadvance"](1),n["ɵɵproperty"]("ngClass",o.getClassNames("removeIcon"))}}function w(e,t){if(1&e){var a=n["ɵɵgetCurrentView"]();n["ɵɵelementStart"](0,"div",0),n["ɵɵelementStart"](1,"button",11),n["ɵɵlistener"]("click",(function(){return n["ɵɵrestoreView"](a),n["ɵɵnextContext"]().addRule()})),n["ɵɵelement"](2,"i",0),n["ɵɵtext"](3," Rule "),n["ɵɵelementEnd"](),n["ɵɵtemplate"](4,x,3,3,"button",12),n["ɵɵtemplate"](5,b,3,3,"ng-container",13),n["ɵɵelementEnd"]()}if(2&e){var o=n["ɵɵnextContext"]();n["ɵɵproperty"]("ngClass",o.getClassNames("buttonGroup","rightAlign")),n["ɵɵadvance"](1),n["ɵɵproperty"]("ngClass",o.getClassNames("button"))("disabled",o.disabled),n["ɵɵadvance"](1),n["ɵɵproperty"]("ngClass",o.getClassNames("addIcon")),n["ɵɵadvance"](2),n["ɵɵproperty"]("ngIf",o.allowRuleset),n["ɵɵadvance"](1),n["ɵɵproperty"]("ngIf",!!o.parentValue&&o.allowRuleset)}}function M(e,t){1&e&&n["ɵɵelementContainer"](0)}function O(e,t){if(1&e&&(n["ɵɵelementContainerStart"](0),n["ɵɵtemplate"](1,M,1,0,"ng-container",10),n["ɵɵelementContainerEnd"]()),2&e){var a=t.ngIf,o=n["ɵɵnextContext"]();n["ɵɵadvance"](1),n["ɵɵproperty"]("ngTemplateOutlet",a)("ngTemplateOutletContext",o.getSwitchGroupContext())}}function T(e,t){if(1&e){var a=n["ɵɵgetCurrentView"]();n["ɵɵelementStart"](0,"div",0),n["ɵɵelementStart"](1,"div",0),n["ɵɵelementStart"](2,"input",14,15),n["ɵɵlistener"]("ngModelChange",(function(e){return n["ɵɵrestoreView"](a),n["ɵɵnextContext"](2).data.condition=e})),n["ɵɵelementEnd"](),n["ɵɵelementStart"](4,"label",9),n["ɵɵlistener"]("click",(function(){n["ɵɵrestoreView"](a);var e=n["ɵɵreference"](3);return n["ɵɵnextContext"](2).changeCondition(e.value)})),n["ɵɵtext"](5,"AND"),n["ɵɵelementEnd"](),n["ɵɵelementEnd"](),n["ɵɵelementStart"](6,"div",0),n["ɵɵelementStart"](7,"input",16,17),n["ɵɵlistener"]("ngModelChange",(function(e){return n["ɵɵrestoreView"](a),n["ɵɵnextContext"](2).data.condition=e})),n["ɵɵelementEnd"](),n["ɵɵelementStart"](9,"label",9),n["ɵɵlistener"]("click",(function(){n["ɵɵrestoreView"](a);var e=n["ɵɵreference"](8);return n["ɵɵnextContext"](2).changeCondition(e.value)})),n["ɵɵtext"](10,"OR"),n["ɵɵelementEnd"](),n["ɵɵelementEnd"](),n["ɵɵelementEnd"]()}if(2&e){var o=n["ɵɵnextContext"](2);n["ɵɵproperty"]("ngClass",o.getClassNames("switchGroup","transition")),n["ɵɵadvance"](1),n["ɵɵproperty"]("ngClass",o.getClassNames("switchControl")),n["ɵɵadvance"](1),n["ɵɵproperty"]("ngClass",o.getClassNames("switchRadio"))("ngModel",o.data.condition)("disabled",o.disabled),n["ɵɵadvance"](2),n["ɵɵproperty"]("ngClass",o.getClassNames("switchLabel")),n["ɵɵadvance"](2),n["ɵɵproperty"]("ngClass",o.getClassNames("switchControl")),n["ɵɵadvance"](1),n["ɵɵproperty"]("ngClass",o.getClassNames("switchRadio"))("ngModel",o.data.condition)("disabled",o.disabled),n["ɵɵadvance"](2),n["ɵɵproperty"]("ngClass",o.getClassNames("switchLabel"))}}function S(e,t){if(1&e&&n["ɵɵtemplate"](0,T,11,11,"div",8),2&e){var a=n["ɵɵnextContext"]();n["ɵɵproperty"]("ngIf",a.data)}}function I(e,t){1&e&&n["ɵɵelementContainer"](0)}function E(e,t){if(1&e&&(n["ɵɵelementContainerStart"](0),n["ɵɵelementStart"](1,"div",0),n["ɵɵtemplate"](2,I,1,0,"ng-container",10),n["ɵɵelementEnd"](),n["ɵɵelementContainerEnd"]()),2&e){var a=t.ngIf,o=n["ɵɵnextContext"](3).$implicit,r=n["ɵɵnextContext"](2);n["ɵɵadvance"](1),n["ɵɵproperty"]("ngClass",r.getClassNames("buttonGroup","rightAlign")),n["ɵɵadvance"](1),n["ɵɵproperty"]("ngTemplateOutlet",a)("ngTemplateOutletContext",r.getRemoveButtonContext(o))}}function q(e,t){if(1&e){var a=n["ɵɵgetCurrentView"]();n["ɵɵelementStart"](0,"div",0),n["ɵɵelementStart"](1,"button",11),n["ɵɵlistener"]("click",(function(){n["ɵɵrestoreView"](a);var e=n["ɵɵnextContext"](3).$implicit,t=n["ɵɵnextContext"](2);return t.removeRule(e,t.data)})),n["ɵɵelement"](2,"i",0),n["ɵɵelementEnd"](),n["ɵɵelementEnd"]()}if(2&e){var o=n["ɵɵnextContext"](5);n["ɵɵproperty"]("ngClass",o.getClassNames("removeButtonSize","rightAlign")),n["ɵɵadvance"](1),n["ɵɵproperty"]("ngClass",o.getClassNames("button","removeButton"))("disabled",o.disabled),n["ɵɵadvance"](1),n["ɵɵproperty"]("ngClass",o.getClassNames("removeIcon"))}}function _(e,t){1&e&&n["ɵɵelementContainer"](0)}function P(e,t){if(1&e&&(n["ɵɵelementContainerStart"](0),n["ɵɵtemplate"](1,_,1,0,"ng-container",10),n["ɵɵelementContainerEnd"]()),2&e){var a=t.ngIf,o=n["ɵɵnextContext"](4).$implicit,r=n["ɵɵnextContext"](2);n["ɵɵadvance"](1),n["ɵɵproperty"]("ngTemplateOutlet",a)("ngTemplateOutletContext",r.getEntityContext(o))}}function R(e,t){if(1&e&&(n["ɵɵelementStart"](0,"div",27),n["ɵɵtemplate"](1,P,2,2,"ng-container",3),n["ɵɵelementEnd"]()),2&e){n["ɵɵnextContext"]();var a=n["ɵɵreference"](6),o=n["ɵɵnextContext"](4);n["ɵɵadvance"](1),n["ɵɵproperty"]("ngIf",o.getEntityTemplate())("ngIfElse",a)}}function V(e,t){if(1&e&&(n["ɵɵelementStart"](0,"option",30),n["ɵɵtext"](1),n["ɵɵelementEnd"]()),2&e){var a=t.$implicit;n["ɵɵproperty"]("ngValue",a.value),n["ɵɵadvance"](1),n["ɵɵtextInterpolate1"](" ",a.name," ")}}function N(e,t){if(1&e){var a=n["ɵɵgetCurrentView"]();n["ɵɵelementStart"](0,"div",0),n["ɵɵelementStart"](1,"select",28),n["ɵɵlistener"]("ngModelChange",(function(e){return n["ɵɵrestoreView"](a),n["ɵɵnextContext"](3).$implicit.entity=e}))("ngModelChange",(function(e){n["ɵɵrestoreView"](a);var t=n["ɵɵnextContext"](3),o=t.$implicit,r=t.index,i=n["ɵɵnextContext"](2);return i.changeEntity(e,o,r,i.data)})),n["ɵɵtemplate"](2,V,2,2,"option",29),n["ɵɵelementEnd"](),n["ɵɵelementEnd"]()}if(2&e){var o=n["ɵɵnextContext"](3).$implicit,r=n["ɵɵnextContext"](2);n["ɵɵproperty"]("ngClass",r.getClassNames("entityControlSize")),n["ɵɵadvance"](1),n["ɵɵproperty"]("ngClass",r.getClassNames("entityControl"))("ngModel",o.entity)("disabled",r.disabled),n["ɵɵadvance"](1),n["ɵɵproperty"]("ngForOf",r.entities)}}function k(e,t){1&e&&n["ɵɵelementContainer"](0)}function D(e,t){if(1&e&&(n["ɵɵelementContainerStart"](0),n["ɵɵtemplate"](1,k,1,0,"ng-container",10),n["ɵɵelementContainerEnd"]()),2&e){var a=t.ngIf,o=n["ɵɵnextContext"](3).$implicit,r=n["ɵɵnextContext"](2);n["ɵɵadvance"](1),n["ɵɵproperty"]("ngTemplateOutlet",a)("ngTemplateOutletContext",r.getFieldContext(o))}}function F(e,t){if(1&e&&(n["ɵɵelementStart"](0,"option",30),n["ɵɵtext"](1),n["ɵɵelementEnd"]()),2&e){var a=t.$implicit;n["ɵɵproperty"]("ngValue",a.value),n["ɵɵadvance"](1),n["ɵɵtextInterpolate1"](" ",a.name," ")}}function $(e,t){if(1&e){var a=n["ɵɵgetCurrentView"]();n["ɵɵelementStart"](0,"div",0),n["ɵɵelementStart"](1,"select",28),n["ɵɵlistener"]("ngModelChange",(function(e){return n["ɵɵrestoreView"](a),n["ɵɵnextContext"](3).$implicit.field=e}))("ngModelChange",(function(e){n["ɵɵrestoreView"](a);var t=n["ɵɵnextContext"](3).$implicit;return n["ɵɵnextContext"](2).changeField(e,t)})),n["ɵɵtemplate"](2,F,2,2,"option",29),n["ɵɵelementEnd"](),n["ɵɵelementEnd"]()}if(2&e){var o=n["ɵɵnextContext"](3).$implicit,r=n["ɵɵnextContext"](2);n["ɵɵproperty"]("ngClass",r.getClassNames("fieldControlSize")),n["ɵɵadvance"](1),n["ɵɵproperty"]("ngClass",r.getClassNames("fieldControl"))("ngModel",o.field)("disabled",r.disabled),n["ɵɵadvance"](1),n["ɵɵproperty"]("ngForOf",r.getFields(o.entity))}}function G(e,t){1&e&&n["ɵɵelementContainer"](0)}function B(e,t){if(1&e&&(n["ɵɵelementContainerStart"](0),n["ɵɵtemplate"](1,G,1,0,"ng-container",10),n["ɵɵelementContainerEnd"]()),2&e){var a=t.ngIf,o=n["ɵɵnextContext"](3).$implicit,r=n["ɵɵnextContext"](2);n["ɵɵadvance"](1),n["ɵɵproperty"]("ngTemplateOutlet",a)("ngTemplateOutletContext",r.getOperatorContext(o))}}function A(e,t){if(1&e&&(n["ɵɵelementStart"](0,"option",30),n["ɵɵtext"](1),n["ɵɵelementEnd"]()),2&e){var a=t.$implicit;n["ɵɵproperty"]("ngValue",a),n["ɵɵadvance"](1),n["ɵɵtextInterpolate1"](" ",a," ")}}function Q(e,t){if(1&e){var a=n["ɵɵgetCurrentView"]();n["ɵɵelementStart"](0,"div",0),n["ɵɵelementStart"](1,"select",28),n["ɵɵlistener"]("ngModelChange",(function(e){return n["ɵɵrestoreView"](a),n["ɵɵnextContext"](3).$implicit.operator=e}))("ngModelChange",(function(){n["ɵɵrestoreView"](a);var e=n["ɵɵnextContext"](3).$implicit;return n["ɵɵnextContext"](2).changeOperator(e)})),n["ɵɵtemplate"](2,A,2,2,"option",29),n["ɵɵelementEnd"](),n["ɵɵelementEnd"]()}if(2&e){var o=n["ɵɵnextContext"](3).$implicit,r=n["ɵɵnextContext"](2);n["ɵɵproperty"]("ngClass",r.getClassNames("operatorControlSize")),n["ɵɵadvance"](1),n["ɵɵproperty"]("ngClass",r.getClassNames("operatorControl"))("ngModel",o.operator)("disabled",r.disabled),n["ɵɵadvance"](1),n["ɵɵproperty"]("ngForOf",r.getOperators(o.field))}}function j(e,t){1&e&&n["ɵɵelementContainer"](0)}function W(e,t){if(1&e&&(n["ɵɵelementContainerStart"](0),n["ɵɵtemplate"](1,j,1,0,"ng-container",10),n["ɵɵelementContainerEnd"]()),2&e){var a=t.ngIf,o=n["ɵɵnextContext"](3).$implicit,r=n["ɵɵnextContext"](2);n["ɵɵadvance"](1),n["ɵɵproperty"]("ngTemplateOutlet",a)("ngTemplateOutletContext",r.getInputContext(o))}}function z(e,t){if(1&e){var a=n["ɵɵgetCurrentView"]();n["ɵɵelementStart"](0,"input",39),n["ɵɵlistener"]("ngModelChange",(function(e){return n["ɵɵrestoreView"](a),n["ɵɵnextContext"](4).$implicit.value=e}))("ngModelChange",(function(){return n["ɵɵrestoreView"](a),n["ɵɵnextContext"](6).changeInput()})),n["ɵɵelementEnd"]()}if(2&e){var o=n["ɵɵnextContext"](4).$implicit,r=n["ɵɵnextContext"](2);n["ɵɵproperty"]("ngClass",r.getClassNames("inputControl"))("ngModel",o.value)("disabled",r.disabled)}}function L(e,t){if(1&e){var a=n["ɵɵgetCurrentView"]();n["ɵɵelementStart"](0,"input",40),n["ɵɵlistener"]("ngModelChange",(function(e){return n["ɵɵrestoreView"](a),n["ɵɵnextContext"](4).$implicit.value=e}))("ngModelChange",(function(){return n["ɵɵrestoreView"](a),n["ɵɵnextContext"](6).changeInput()})),n["ɵɵelementEnd"]()}if(2&e){var o=n["ɵɵnextContext"](4).$implicit,r=n["ɵɵnextContext"](2);n["ɵɵproperty"]("ngClass",r.getClassNames("inputControl"))("ngModel",o.value)("disabled",r.disabled)}}function H(e,t){if(1&e){var a=n["ɵɵgetCurrentView"]();n["ɵɵelementStart"](0,"input",41),n["ɵɵlistener"]("ngModelChange",(function(e){return n["ɵɵrestoreView"](a),n["ɵɵnextContext"](4).$implicit.value=e}))("ngModelChange",(function(){return n["ɵɵrestoreView"](a),n["ɵɵnextContext"](6).changeInput()})),n["ɵɵelementEnd"]()}if(2&e){var o=n["ɵɵnextContext"](4).$implicit,r=n["ɵɵnextContext"](2);n["ɵɵproperty"]("ngClass",r.getClassNames("inputControl"))("ngModel",o.value)("disabled",r.disabled)}}function U(e,t){if(1&e){var a=n["ɵɵgetCurrentView"]();n["ɵɵelementStart"](0,"input",42),n["ɵɵlistener"]("ngModelChange",(function(e){return n["ɵɵrestoreView"](a),n["ɵɵnextContext"](4).$implicit.value=e}))("ngModelChange",(function(){return n["ɵɵrestoreView"](a),n["ɵɵnextContext"](6).changeInput()})),n["ɵɵelementEnd"]()}if(2&e){var o=n["ɵɵnextContext"](4).$implicit,r=n["ɵɵnextContext"](2);n["ɵɵproperty"]("ngClass",r.getClassNames("inputControl"))("ngModel",o.value)("disabled",r.disabled)}}function J(e,t){if(1&e&&(n["ɵɵelementStart"](0,"option",30),n["ɵɵtext"](1),n["ɵɵelementEnd"]()),2&e){var a=t.$implicit;n["ɵɵproperty"]("ngValue",a.value),n["ɵɵadvance"](1),n["ɵɵtextInterpolate1"](" ",a.name," ")}}function K(e,t){if(1&e){var a=n["ɵɵgetCurrentView"]();n["ɵɵelementStart"](0,"select",28),n["ɵɵlistener"]("ngModelChange",(function(e){return n["ɵɵrestoreView"](a),n["ɵɵnextContext"](4).$implicit.value=e}))("ngModelChange",(function(){return n["ɵɵrestoreView"](a),n["ɵɵnextContext"](6).changeInput()})),n["ɵɵtemplate"](1,J,2,2,"option",29),n["ɵɵelementEnd"]()}if(2&e){var o=n["ɵɵnextContext"](4).$implicit,r=n["ɵɵnextContext"](2);n["ɵɵproperty"]("ngClass",r.getClassNames("inputControl"))("ngModel",o.value)("disabled",r.disabled),n["ɵɵadvance"](1),n["ɵɵproperty"]("ngForOf",r.getOptions(o.field))}}function X(e,t){if(1&e&&(n["ɵɵelementStart"](0,"option",30),n["ɵɵtext"](1),n["ɵɵelementEnd"]()),2&e){var a=t.$implicit;n["ɵɵproperty"]("ngValue",a.value),n["ɵɵadvance"](1),n["ɵɵtextInterpolate1"](" ",a.name," ")}}function Y(e,t){if(1&e){var a=n["ɵɵgetCurrentView"]();n["ɵɵelementContainerStart"](0),n["ɵɵelementStart"](1,"select",43),n["ɵɵlistener"]("ngModelChange",(function(e){return n["ɵɵrestoreView"](a),n["ɵɵnextContext"](4).$implicit.value=e}))("ngModelChange",(function(){return n["ɵɵrestoreView"](a),n["ɵɵnextContext"](6).changeInput()})),n["ɵɵtemplate"](2,X,2,2,"option",29),n["ɵɵelementEnd"](),n["ɵɵelementContainerEnd"]()}if(2&e){var o=n["ɵɵnextContext"](4).$implicit,r=n["ɵɵnextContext"](2);n["ɵɵadvance"](1),n["ɵɵproperty"]("ngClass",r.getClassNames("inputControl"))("ngModel",o.value)("disabled",r.disabled),n["ɵɵadvance"](1),n["ɵɵproperty"]("ngForOf",r.getOptions(o.field))}}function Z(e,t){if(1&e){var a=n["ɵɵgetCurrentView"]();n["ɵɵelementStart"](0,"input",44),n["ɵɵlistener"]("ngModelChange",(function(e){return n["ɵɵrestoreView"](a),n["ɵɵnextContext"](4).$implicit.value=e}))("ngModelChange",(function(){return n["ɵɵrestoreView"](a),n["ɵɵnextContext"](6).changeInput()})),n["ɵɵelementEnd"]()}if(2&e){var o=n["ɵɵnextContext"](4).$implicit,r=n["ɵɵnextContext"](2);n["ɵɵproperty"]("ngClass",r.getClassNames("inputControl"))("ngModel",o.value)("disabled",r.disabled)}}function ee(e,t){if(1&e&&(n["ɵɵelementStart"](0,"div",31),n["ɵɵtemplate"](1,z,1,3,"input",32),n["ɵɵtemplate"](2,L,1,3,"input",33),n["ɵɵtemplate"](3,H,1,3,"input",34),n["ɵɵtemplate"](4,U,1,3,"input",35),n["ɵɵtemplate"](5,K,2,4,"select",36),n["ɵɵtemplate"](6,Y,3,4,"ng-container",37),n["ɵɵtemplate"](7,Z,1,3,"input",38),n["ɵɵelementEnd"]()),2&e){var a=n["ɵɵnextContext"](3).$implicit,o=n["ɵɵnextContext"](2);n["ɵɵproperty"]("ngClass",o.getClassNames("inputControlSize"))("ngSwitch",o.getInputType(a.field,a.operator)),n["ɵɵadvance"](1),n["ɵɵproperty"]("ngSwitchCase","string"),n["ɵɵadvance"](1),n["ɵɵproperty"]("ngSwitchCase","number"),n["ɵɵadvance"](1),n["ɵɵproperty"]("ngSwitchCase","date"),n["ɵɵadvance"](1),n["ɵɵproperty"]("ngSwitchCase","time"),n["ɵɵadvance"](1),n["ɵɵproperty"]("ngSwitchCase","category"),n["ɵɵadvance"](1),n["ɵɵproperty"]("ngSwitchCase","multiselect"),n["ɵɵadvance"](1),n["ɵɵproperty"]("ngSwitchCase","boolean")}}function te(e,t){if(1&e&&(n["ɵɵelementContainerStart"](0),n["ɵɵtemplate"](1,E,3,3,"ng-container",3),n["ɵɵtemplate"](2,q,3,4,"ng-template",null,21,n["ɵɵtemplateRefExtractor"]),n["ɵɵtemplate"](4,R,2,2,"div",22),n["ɵɵtemplate"](5,N,3,5,"ng-template",null,23,n["ɵɵtemplateRefExtractor"]),n["ɵɵtemplate"](7,D,2,2,"ng-container",3),n["ɵɵtemplate"](8,$,3,5,"ng-template",null,24,n["ɵɵtemplateRefExtractor"]),n["ɵɵtemplate"](10,B,2,2,"ng-container",3),n["ɵɵtemplate"](11,Q,3,5,"ng-template",null,25,n["ɵɵtemplateRefExtractor"]),n["ɵɵtemplate"](13,W,2,2,"ng-container",3),n["ɵɵtemplate"](14,ee,8,9,"ng-template",null,26,n["ɵɵtemplateRefExtractor"]),n["ɵɵelementContainerEnd"]()),2&e){var a=n["ɵɵreference"](3),o=n["ɵɵreference"](9),r=n["ɵɵreference"](12),i=n["ɵɵreference"](15),l=n["ɵɵnextContext"](2).$implicit,s=n["ɵɵnextContext"](2);n["ɵɵadvance"](1),n["ɵɵproperty"]("ngIf",s.getRemoveButtonTemplate())("ngIfElse",a),n["ɵɵadvance"](3),n["ɵɵproperty"]("ngIf",(null==s.entities?null:s.entities.length)>0),n["ɵɵadvance"](3),n["ɵɵproperty"]("ngIf",s.getFieldTemplate())("ngIfElse",o),n["ɵɵadvance"](3),n["ɵɵproperty"]("ngIf",s.getOperatorTemplate())("ngIfElse",r),n["ɵɵadvance"](3),n["ɵɵproperty"]("ngIf",s.findTemplateForRule(l))("ngIfElse",i)}}function ne(e,t){if(1&e&&n["ɵɵelement"](0,"query-builder",45),2&e){var a=n["ɵɵnextContext"](2).$implicit,o=n["ɵɵnextContext"](2);n["ɵɵproperty"]("data",a)("disabled",o.disabled)("parentTouchedCallback",o.parentTouchedCallback||o.onTouchedCallback)("parentChangeCallback",o.parentChangeCallback||o.onChangeCallback)("parentInputTemplates",o.parentInputTemplates||o.inputTemplates)("parentOperatorTemplate",o.parentOperatorTemplate||o.operatorTemplate)("parentFieldTemplate",o.parentFieldTemplate||o.fieldTemplate)("parentEntityTemplate",o.parentEntityTemplate||o.entityTemplate)("parentSwitchGroupTemplate",o.parentSwitchGroupTemplate||o.switchGroupTemplate)("parentButtonGroupTemplate",o.parentButtonGroupTemplate||o.buttonGroupTemplate)("parentRemoveButtonTemplate",o.parentRemoveButtonTemplate||o.removeButtonTemplate)("parentEmptyWarningTemplate",o.parentEmptyWarningTemplate||o.emptyWarningTemplate)("parentArrowIconTemplate",o.parentArrowIconTemplate||o.arrowIconTemplate)("parentValue",o.data)("classNames",o.classNames)("config",o.config)("allowRuleset",o.allowRuleset)("allowCollapse",o.allowCollapse)("emptyMessage",o.emptyMessage)("operatorMap",o.operatorMap)}}function ae(e,t){1&e&&n["ɵɵelementContainer"](0)}function oe(e,t){if(1&e&&(n["ɵɵelementContainerStart"](0),n["ɵɵtemplate"](1,ae,1,0,"ng-container",10),n["ɵɵelementContainerEnd"]()),2&e){var a=n["ɵɵnextContext"]().ngIf,o=n["ɵɵnextContext"](4);n["ɵɵadvance"](1),n["ɵɵproperty"]("ngTemplateOutlet",a)("ngTemplateOutletContext",o.getEmptyWarningContext())}}function re(e,t){if(1&e&&(n["ɵɵelementContainerStart"](0),n["ɵɵtemplate"](1,oe,2,2,"ng-container",13),n["ɵɵelementContainerEnd"]()),2&e){var a=n["ɵɵnextContext"]().ngIf;n["ɵɵadvance"](1),n["ɵɵproperty"]("ngIf",a.invalid)}}function ie(e,t){if(1&e&&(n["ɵɵelementStart"](0,"p",0),n["ɵɵtext"](1),n["ɵɵelementEnd"]()),2&e){var a=n["ɵɵnextContext"](5);n["ɵɵproperty"]("ngClass",a.getClassNames("emptyWarning")),n["ɵɵadvance"](1),n["ɵɵtextInterpolate1"](" ",a.emptyMessage," ")}}function le(e,t){if(1&e&&n["ɵɵtemplate"](0,ie,2,2,"p",8),2&e){var a=n["ɵɵnextContext"]().ngIf;n["ɵɵproperty"]("ngIf",a.invalid)}}function se(e,t){if(1&e&&(n["ɵɵelementContainerStart"](0),n["ɵɵelementStart"](1,"li",0),n["ɵɵtemplate"](2,te,16,9,"ng-container",13),n["ɵɵtemplate"](3,ne,1,20,"query-builder",19),n["ɵɵtemplate"](4,re,2,1,"ng-container",3),n["ɵɵtemplate"](5,le,1,1,"ng-template",null,20,n["ɵɵtemplateRefExtractor"]),n["ɵɵelementEnd"](),n["ɵɵelementContainerEnd"]()),2&e){var a=t.ngIf,o=n["ɵɵreference"](6),r=n["ɵɵnextContext"](3);n["ɵɵadvance"](1),n["ɵɵproperty"]("ngClass",r.getQueryItemClassName(a)),n["ɵɵadvance"](1),n["ɵɵproperty"]("ngIf",!a.ruleset),n["ɵɵadvance"](1),n["ɵɵproperty"]("ngIf",a.ruleset),n["ɵɵadvance"](1),n["ɵɵproperty"]("ngIf",r.getEmptyWarningTemplate())("ngIfElse",o)}}var pe=function(e,t){return{ruleset:e,invalid:t}};function ue(e,t){if(1&e&&(n["ɵɵelementContainerStart"](0),n["ɵɵtemplate"](1,se,7,5,"ng-container",13),n["ɵɵelementContainerEnd"]()),2&e){var a=t.$implicit,o=n["ɵɵnextContext"](2);n["ɵɵadvance"](1),n["ɵɵproperty"]("ngIf",n["ɵɵpureFunction2"](1,pe,!!a.rules,!o.config.allowEmptyRulesets&&a.rules&&0===a.rules.length))}}function ce(e,t){if(1&e&&(n["ɵɵelementStart"](0,"ul",0),n["ɵɵtemplate"](1,ue,2,4,"ng-container",18),n["ɵɵelementEnd"]()),2&e){var a=n["ɵɵnextContext"]();n["ɵɵproperty"]("ngClass",a.getClassNames("tree")),n["ɵɵadvance"](1),n["ɵɵproperty"]("ngForOf",a.data.rules)}}var de={provide:t.NG_VALUE_ACCESSOR,useExisting:n.forwardRef((function(){return fe})),multi:!0},ge={provide:t.NG_VALIDATORS,useExisting:n.forwardRef((function(){return fe})),multi:!0},fe=function(){function e(e){var t=this;this.changeDetectorRef=e,this.defaultClassNames={arrowIconButton:"q-arrow-icon-button",arrowIcon:"q-icon q-arrow-icon",removeIcon:"q-icon q-remove-icon",addIcon:"q-icon q-add-icon",button:"q-button",buttonGroup:"q-button-group",removeButton:"q-remove-button",switchGroup:"q-switch-group",switchLabel:"q-switch-label",switchRadio:"q-switch-radio",rightAlign:"q-right-align",transition:"q-transition",collapsed:"q-collapsed",treeContainer:"q-tree-container",tree:"q-tree",row:"q-row",connector:"q-connector",rule:"q-rule",ruleSet:"q-ruleset",invalidRuleSet:"q-invalid-ruleset",emptyWarning:"q-empty-warning",fieldControl:"q-field-control",fieldControlSize:"q-control-size",entityControl:"q-entity-control",entityControlSize:"q-control-size",operatorControl:"q-operator-control",operatorControlSize:"q-control-size",inputControl:"q-input-control",inputControlSize:"q-control-size"},this.defaultOperatorMap={string:["=","!=","contains","like"],number:["=","!=",">",">=","<","<="],time:["=","!=",">",">=","<","<="],date:["=","!=",">",">=","<","<="],category:["=","!=","in","not in"],boolean:["="]},this.data={condition:"and",rules:[]},this.allowRuleset=!0,this.allowCollapse=!1,this.emptyMessage="A ruleset cannot be empty. Please add a rule or remove it all together.",this.config={fields:{}},this.persistValueOnFieldChange=!1,this.defaultTemplateTypes=["string","number","time","date","category","boolean","multiselect"],this.defaultPersistValueTypes=["string","number","time","date","boolean"],this.defaultEmptyList=[],this.inputContextCache=new Map,this.operatorContextCache=new Map,this.fieldContextCache=new Map,this.entityContextCache=new Map,this.removeButtonContextCache=new Map,this.getDisabledState=function(){return t.disabled}}return e.prototype.ngOnInit=function(){},e.prototype.ngOnChanges=function(e){var t=this.config,n=typeof t;if("object"!==n)throw new Error("Expected 'config' must be a valid object, got "+n+" instead.");this.fields=Object.keys(t.fields).map((function(e){var n=t.fields[e];return n.value=n.value||e,n})),t.entities?this.entities=Object.keys(t.entities).map((function(e){var n=t.entities[e];return n.value=n.value||e,n})):this.entities=null,this.operatorsCache={}},e.prototype.validate=function(e){var t={},n=[],a=!1;return!this.config.allowEmptyRulesets&&this.checkEmptyRuleInRuleset(this.data)&&(t.empty="Empty rulesets are not allowed.",a=!0),this.validateRulesInRuleset(this.data,n),n.length&&(t.rules=n,a=!0),a?t:null},Object.defineProperty(e.prototype,"value",{get:function(){return this.data},set:function(e){this.data=e||{condition:"and",rules:[]},this.handleDataChange()},enumerable:!0,configurable:!0}),e.prototype.writeValue=function(e){this.value=e},e.prototype.registerOnChange=function(e){var t=this;this.onChangeCallback=function(){return e(t.data)}},e.prototype.registerOnTouched=function(e){var t=this;this.onTouchedCallback=function(){return e(t.data)}},e.prototype.setDisabledState=function(e){this.disabled=e,this.changeDetectorRef.detectChanges()},e.prototype.findTemplateForRule=function(e){var t=this.getInputType(e.field,e.operator);if(t){var n=this.findQueryInput(t);return n?n.template:(-1===this.defaultTemplateTypes.indexOf(t)&&console.warn("Could not find template for field with type: "+t),null)}},e.prototype.findQueryInput=function(e){return(this.parentInputTemplates||this.inputTemplates).find((function(t){return t.queryInputType===e}))},e.prototype.getOperators=function(e){if(this.operatorsCache[e])return this.operatorsCache[e];var t=this.defaultEmptyList,n=this.config.fields[e];if(this.config.getOperators)return this.config.getOperators(e,n);var a=n.type;return n&&n.operators?t=n.operators:a?(0===(t=this.operatorMap&&this.operatorMap[a]||this.defaultOperatorMap[a]||this.defaultEmptyList).length&&console.warn("No operators found for field '"+e+"' with type "+n.type+". Please define an 'operators' property on the field or use the 'operatorMap' binding to fix this."),n.nullable&&(t=t.concat(["is null","is not null"]))):console.warn("No 'type' property found on field: '"+e+"'"),this.operatorsCache[e]=t,t},e.prototype.getFields=function(e){return this.entities&&e?this.fields.filter((function(t){return t&&t.entity===e})):this.fields},e.prototype.getInputType=function(e,t){if(this.config.getInputType)return this.config.getInputType(e,t);if(!this.config.fields[e])throw new Error("No configuration for field '"+e+"' could be found! Please add it to config.fields.");var n=this.config.fields[e].type;switch(t){case"is null":case"is not null":return null;case"in":case"not in":return"category"===n||"boolean"===n?"multiselect":n;default:return n}},e.prototype.getOptions=function(e){return this.config.getOptions?this.config.getOptions(e):this.config.fields[e].options||this.defaultEmptyList},e.prototype.getClassNames=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var a=this.classNames?this.classNames:this.defaultClassNames,o=t.map((function(t){return a[t]||e.defaultClassNames[t]})).filter((function(e){return!!e}));return o.length?o.join(" "):null},e.prototype.getDefaultField=function(e){if(e){if(void 0!==e.defaultField)return this.getDefaultValue(e.defaultField);var t=this.fields.filter((function(t){return t&&t.entity===e.value}));return t&&t.length?t[0]:(console.warn("No fields found for entity '"+e.name+"'. A 'defaultOperator' is also not specified on the field config. Operator value will default to null."),null)}return null},e.prototype.getDefaultOperator=function(e){if(e&&void 0!==e.defaultOperator)return this.getDefaultValue(e.defaultOperator);var t=this.getOperators(e.value);return t&&t.length?t[0]:(console.warn("No operators found for field '"+e.value+"'. A 'defaultOperator' is also not specified on the field config. Operator value will default to null."),null)},e.prototype.addRule=function(e){if(!this.disabled){if(e=e||this.data,this.config.addRule)this.config.addRule(e);else{var t=this.fields[0];e.rules=e.rules.concat([{field:t.value,operator:this.getDefaultOperator(t),value:this.getDefaultValue(t.defaultValue),entity:t.entity}])}this.handleTouched(),this.handleDataChange()}},e.prototype.removeRule=function(e,t){this.disabled||(t=t||this.data,this.config.removeRule?this.config.removeRule(e,t):t.rules=t.rules.filter((function(t){return t!==e})),this.inputContextCache.delete(e),this.operatorContextCache.delete(e),this.fieldContextCache.delete(e),this.entityContextCache.delete(e),this.removeButtonContextCache.delete(e),this.handleTouched(),this.handleDataChange())},e.prototype.addRuleSet=function(e){this.disabled||(e=e||this.data,this.config.addRuleSet?this.config.addRuleSet(e):e.rules=e.rules.concat([{condition:"and",rules:[]}]),this.handleTouched(),this.handleDataChange())},e.prototype.removeRuleSet=function(e,t){this.disabled||(e=e||this.data,t=t||this.parentValue,this.config.removeRuleSet?this.config.removeRuleSet(e,t):t.rules=t.rules.filter((function(t){return t!==e})),this.handleTouched(),this.handleDataChange())},e.prototype.transitionEnd=function(e){this.treeContainer.nativeElement.style.maxHeight=null},e.prototype.toggleCollapse=function(){var e=this;this.computedTreeContainerHeight(),setTimeout((function(){e.data.collapsed=!e.data.collapsed}),100)},e.prototype.computedTreeContainerHeight=function(){var e=this.treeContainer.nativeElement;e&&e.firstElementChild&&(e.style.maxHeight=e.firstElementChild.clientHeight+8+"px")},e.prototype.changeCondition=function(e){this.disabled||(this.data.condition=e,this.handleTouched(),this.handleDataChange())},e.prototype.changeOperator=function(e){this.disabled||(this.config.coerceValueForOperator?e.value=this.config.coerceValueForOperator(e.operator,e.value,e):e.value=this.coerceValueForOperator(e.operator,e.value,e),this.handleTouched(),this.handleDataChange())},e.prototype.coerceValueForOperator=function(e,t,n){return"multiselect"!==this.getInputType(n.field,e)||Array.isArray(t)?t:[t]},e.prototype.changeInput=function(){this.disabled||(this.handleTouched(),this.handleDataChange())},e.prototype.changeField=function(e,t){if(!this.disabled){var n=this.inputContextCache.get(t),a=n&&n.field,o=this.config.fields[e],r=this.calculateFieldChangeValue(a,o,t.value);void 0!==r?t.value=r:delete t.value,t.operator=this.getDefaultOperator(o),this.inputContextCache.delete(t),this.operatorContextCache.delete(t),this.fieldContextCache.delete(t),this.entityContextCache.delete(t),this.getInputContext(t),this.getFieldContext(t),this.getOperatorContext(t),this.getEntityContext(t),this.handleTouched(),this.handleDataChange()}},e.prototype.changeEntity=function(e,t,n,a){if(!this.disabled){var o=n,r=a,i=this.entities.find((function(t){return t.value===e})),l=this.getDefaultField(i);r||(o=(r=this.data).rules.findIndex((function(e){return e===t}))),t.field=l.value,r.rules[o]=t,l?this.changeField(l.value,t):(this.handleTouched(),this.handleDataChange())}},e.prototype.getDefaultValue=function(e){switch(typeof e){case"function":return e();default:return e}},e.prototype.getOperatorTemplate=function(){var e=this.parentOperatorTemplate||this.operatorTemplate;return e?e.template:null},e.prototype.getFieldTemplate=function(){var e=this.parentFieldTemplate||this.fieldTemplate;return e?e.template:null},e.prototype.getEntityTemplate=function(){var e=this.parentEntityTemplate||this.entityTemplate;return e?e.template:null},e.prototype.getArrowIconTemplate=function(){var e=this.parentArrowIconTemplate||this.arrowIconTemplate;return e?e.template:null},e.prototype.getButtonGroupTemplate=function(){var e=this.parentButtonGroupTemplate||this.buttonGroupTemplate;return e?e.template:null},e.prototype.getSwitchGroupTemplate=function(){var e=this.parentSwitchGroupTemplate||this.switchGroupTemplate;return e?e.template:null},e.prototype.getRemoveButtonTemplate=function(){var e=this.parentRemoveButtonTemplate||this.removeButtonTemplate;return e?e.template:null},e.prototype.getEmptyWarningTemplate=function(){var e=this.parentEmptyWarningTemplate||this.emptyWarningTemplate;return e?e.template:null},e.prototype.getQueryItemClassName=function(e){var t=this.getClassNames("row","connector","transition");return t+=" "+this.getClassNames(e.ruleset?"ruleSet":"rule"),e.invalid&&(t+=" "+this.getClassNames("invalidRuleSet")),t},e.prototype.getButtonGroupContext=function(){return this.buttonGroupContext||(this.buttonGroupContext={addRule:this.addRule.bind(this),addRuleSet:this.allowRuleset&&this.addRuleSet.bind(this),removeRuleSet:this.allowRuleset&&this.parentValue&&this.removeRuleSet.bind(this),getDisabledState:this.getDisabledState,$implicit:this.data}),this.buttonGroupContext},e.prototype.getRemoveButtonContext=function(e){return this.removeButtonContextCache.has(e)||this.removeButtonContextCache.set(e,{removeRule:this.removeRule.bind(this),getDisabledState:this.getDisabledState,$implicit:e}),this.removeButtonContextCache.get(e)},e.prototype.getFieldContext=function(e){return this.fieldContextCache.has(e)||this.fieldContextCache.set(e,{onChange:this.changeField.bind(this),getFields:this.getFields.bind(this),getDisabledState:this.getDisabledState,fields:this.fields,$implicit:e}),this.fieldContextCache.get(e)},e.prototype.getEntityContext=function(e){return this.entityContextCache.has(e)||this.entityContextCache.set(e,{onChange:this.changeEntity.bind(this),getDisabledState:this.getDisabledState,entities:this.entities,$implicit:e}),this.entityContextCache.get(e)},e.prototype.getSwitchGroupContext=function(){return{onChange:this.changeCondition.bind(this),getDisabledState:this.getDisabledState,$implicit:this.data}},e.prototype.getArrowIconContext=function(){return{getDisabledState:this.getDisabledState,$implicit:this.data}},e.prototype.getEmptyWarningContext=function(){return{getDisabledState:this.getDisabledState,message:this.emptyMessage,$implicit:this.data}},e.prototype.getOperatorContext=function(e){return this.operatorContextCache.has(e)||this.operatorContextCache.set(e,{onChange:this.changeOperator.bind(this),getDisabledState:this.getDisabledState,operators:this.getOperators(e.field),$implicit:e}),this.operatorContextCache.get(e)},e.prototype.getInputContext=function(e){return this.inputContextCache.has(e)||this.inputContextCache.set(e,{onChange:this.changeInput.bind(this),getDisabledState:this.getDisabledState,options:this.getOptions(e.field),field:this.config.fields[e.field],$implicit:e}),this.inputContextCache.get(e)},e.prototype.calculateFieldChangeValue=function(e,t,n){var a=this;if(null!=this.config.calculateFieldChangeValue)return this.config.calculateFieldChangeValue(e,t,n);return this.persistValueOnFieldChange&&null!=e&&null!=t&&e.type===t.type&&-1!==a.defaultPersistValueTypes.indexOf(e.type)?n:t&&void 0!==t.defaultValue?this.getDefaultValue(t.defaultValue):void 0},e.prototype.checkEmptyRuleInRuleset=function(e){var t=this;return!e||!e.rules||0===e.rules.length||e.rules.some((function(e){return!!e.rules&&t.checkEmptyRuleInRuleset(e)}))},e.prototype.validateRulesInRuleset=function(e,t){var n=this;e&&e.rules&&e.rules.length>0&&e.rules.forEach((function(a){if(a.rules)return n.validateRulesInRuleset(a,t);if(a.field){var o=n.config.fields[a.field];if(o&&o.validator&&o.validator.apply){var r=o.validator(a,e);null!=r&&t.push(r)}}}))},e.prototype.handleDataChange=function(){this.changeDetectorRef.markForCheck(),this.onChangeCallback&&this.onChangeCallback(),this.parentChangeCallback&&this.parentChangeCallback()},e.prototype.handleTouched=function(){this.onTouchedCallback&&this.onTouchedCallback(),this.parentTouchedCallback&&this.parentTouchedCallback()},e.ɵfac=function(t){return new(t||e)(n["ɵɵdirectiveInject"](n.ChangeDetectorRef))},e.ɵcmp=n["ɵɵdefineComponent"]({type:e,selectors:[["query-builder"]],contentQueries:function(e,t,a){var g;(1&e&&(n["ɵɵcontentQuery"](a,s,!0),n["ɵɵcontentQuery"](a,l,!0),n["ɵɵcontentQuery"](a,r,!0),n["ɵɵcontentQuery"](a,i,!0),n["ɵɵcontentQuery"](a,o,!0),n["ɵɵcontentQuery"](a,u,!0),n["ɵɵcontentQuery"](a,c,!0),n["ɵɵcontentQuery"](a,d,!0),n["ɵɵcontentQuery"](a,p,!1)),2&e)&&(n["ɵɵqueryRefresh"](g=n["ɵɵloadQuery"]())&&(t.buttonGroupTemplate=g.first),n["ɵɵqueryRefresh"](g=n["ɵɵloadQuery"]())&&(t.switchGroupTemplate=g.first),n["ɵɵqueryRefresh"](g=n["ɵɵloadQuery"]())&&(t.fieldTemplate=g.first),n["ɵɵqueryRefresh"](g=n["ɵɵloadQuery"]())&&(t.entityTemplate=g.first),n["ɵɵqueryRefresh"](g=n["ɵɵloadQuery"]())&&(t.operatorTemplate=g.first),n["ɵɵqueryRefresh"](g=n["ɵɵloadQuery"]())&&(t.removeButtonTemplate=g.first),n["ɵɵqueryRefresh"](g=n["ɵɵloadQuery"]())&&(t.emptyWarningTemplate=g.first),n["ɵɵqueryRefresh"](g=n["ɵɵloadQuery"]())&&(t.arrowIconTemplate=g.first),n["ɵɵqueryRefresh"](g=n["ɵɵloadQuery"]())&&(t.inputTemplates=g))},viewQuery:function(e,t){var a;(1&e&&n["ɵɵstaticViewQuery"](g,!0),2&e)&&(n["ɵɵqueryRefresh"](a=n["ɵɵloadQuery"]())&&(t.treeContainer=a.first))},inputs:{disabled:"disabled",data:"data",allowRuleset:"allowRuleset",allowCollapse:"allowCollapse",emptyMessage:"emptyMessage",classNames:"classNames",operatorMap:"operatorMap",parentValue:"parentValue",config:"config",parentArrowIconTemplate:"parentArrowIconTemplate",parentInputTemplates:"parentInputTemplates",parentOperatorTemplate:"parentOperatorTemplate",parentFieldTemplate:"parentFieldTemplate",parentEntityTemplate:"parentEntityTemplate",parentSwitchGroupTemplate:"parentSwitchGroupTemplate",parentButtonGroupTemplate:"parentButtonGroupTemplate",parentRemoveButtonTemplate:"parentRemoveButtonTemplate",parentEmptyWarningTemplate:"parentEmptyWarningTemplate",parentChangeCallback:"parentChangeCallback",parentTouchedCallback:"parentTouchedCallback",persistValueOnFieldChange:"persistValueOnFieldChange",value:"value"},features:[n["ɵɵProvidersFeature"]([de,ge]),n["ɵɵNgOnChangesFeature"]()],decls:13,vars:8,consts:[[3,"ngClass"],["defaultArrowIcon",""],[3,"ngClass","click",4,"ngIf"],[4,"ngIf","ngIfElse"],["defaultButtonGroup",""],["defaultSwitchGroup",""],[3,"ngClass","transitionend"],["treeContainer",""],[3,"ngClass",4,"ngIf"],[3,"ngClass","click"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["type","button",3,"ngClass","disabled","click"],["type","button",3,"ngClass","disabled","click",4,"ngIf"],[4,"ngIf"],["type","radio","value","and",3,"ngClass","ngModel","disabled","ngModelChange"],["andOption",""],["type","radio","value","or",3,"ngClass","ngModel","disabled","ngModelChange"],["orOption",""],[4,"ngFor","ngForOf"],[3,"data","disabled","parentTouchedCallback","parentChangeCallback","parentInputTemplates","parentOperatorTemplate","parentFieldTemplate","parentEntityTemplate","parentSwitchGroupTemplate","parentButtonGroupTemplate","parentRemoveButtonTemplate","parentEmptyWarningTemplate","parentArrowIconTemplate","parentValue","classNames","config","allowRuleset","allowCollapse","emptyMessage","operatorMap",4,"ngIf"],["defaultEmptyWarning",""],["defaultRemoveButton",""],["class","q-inline-block-display",4,"ngIf"],["defaultEntity",""],["defaultField",""],["defaultOperator",""],["defaultInput",""],[1,"q-inline-block-display"],[3,"ngClass","ngModel","disabled","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],[3,"ngClass","ngSwitch"],["type","text",3,"ngClass","ngModel","disabled","ngModelChange",4,"ngSwitchCase"],["type","number",3,"ngClass","ngModel","disabled","ngModelChange",4,"ngSwitchCase"],["type","date",3,"ngClass","ngModel","disabled","ngModelChange",4,"ngSwitchCase"],["type","time",3,"ngClass","ngModel","disabled","ngModelChange",4,"ngSwitchCase"],[3,"ngClass","ngModel","disabled","ngModelChange",4,"ngSwitchCase"],[4,"ngSwitchCase"],["type","checkbox",3,"ngClass","ngModel","disabled","ngModelChange",4,"ngSwitchCase"],["type","text",3,"ngClass","ngModel","disabled","ngModelChange"],["type","number",3,"ngClass","ngModel","disabled","ngModelChange"],["type","date",3,"ngClass","ngModel","disabled","ngModelChange"],["type","time",3,"ngClass","ngModel","disabled","ngModelChange"],["multiple","",3,"ngClass","ngModel","disabled","ngModelChange"],["type","checkbox",3,"ngClass","ngModel","disabled","ngModelChange"],[3,"data","disabled","parentTouchedCallback","parentChangeCallback","parentInputTemplates","parentOperatorTemplate","parentFieldTemplate","parentEntityTemplate","parentSwitchGroupTemplate","parentButtonGroupTemplate","parentRemoveButtonTemplate","parentEmptyWarningTemplate","parentArrowIconTemplate","parentValue","classNames","config","allowRuleset","allowCollapse","emptyMessage","operatorMap"]],template:function(e,t){if(1&e&&(n["ɵɵelementStart"](0,"div",0),n["ɵɵtemplate"](1,f,1,1,"ng-template",null,1,n["ɵɵtemplateRefExtractor"]),n["ɵɵtemplate"](3,m,2,3,"a",2),n["ɵɵtemplate"](4,v,3,3,"ng-container",3),n["ɵɵtemplate"](5,w,6,6,"ng-template",null,4,n["ɵɵtemplateRefExtractor"]),n["ɵɵtemplate"](7,O,2,2,"ng-container",3),n["ɵɵtemplate"](8,S,1,1,"ng-template",null,5,n["ɵɵtemplateRefExtractor"]),n["ɵɵelementEnd"](),n["ɵɵelementStart"](10,"div",6,7),n["ɵɵlistener"]("transitionend",(function(e){return t.transitionEnd(e)})),n["ɵɵtemplate"](12,ce,2,2,"ul",8),n["ɵɵelementEnd"]()),2&e){var a=n["ɵɵreference"](6),o=n["ɵɵreference"](9);n["ɵɵproperty"]("ngClass",t.getClassNames("switchRow")),n["ɵɵadvance"](3),n["ɵɵproperty"]("ngIf",t.allowCollapse),n["ɵɵadvance"](1),n["ɵɵproperty"]("ngIf",t.getButtonGroupTemplate())("ngIfElse",a),n["ɵɵadvance"](3),n["ɵɵproperty"]("ngIf",t.getSwitchGroupTemplate())("ngIfElse",o),n["ɵɵadvance"](3),n["ɵɵproperty"]("ngClass",t.getClassNames("treeContainer",t.data.collapsed?"collapsed":null)),n["ɵɵadvance"](2),n["ɵɵproperty"]("ngIf",t.data&&t.data.rules)}},directives:[a.NgClass,a.NgIf,a.NgTemplateOutlet,t.RadioControlValueAccessor,t.DefaultValueAccessor,t.NgControlStatus,t.NgModel,a.NgForOf,t.SelectControlValueAccessor,t.NgSelectOption,t["ɵangular_packages_forms_forms_x"],a.NgSwitch,a.NgSwitchCase,t.NumberValueAccessor,t.SelectMultipleControlValueAccessor,t.CheckboxControlValueAccessor,e],styles:["@charset \"UTF-8\";[_nghost-%COMP%]{display:block;width:100%}[_nghost-%COMP%]   .q-icon[_ngcontent-%COMP%]{font-style:normal;font-size:12px}[_nghost-%COMP%]   .q-remove-icon[_ngcontent-%COMP%]::before{content:'❌'}[_nghost-%COMP%]   .q-arrow-icon-button[_ngcontent-%COMP%]{float:left;margin:4px 6px 4px 0;-webkit-transform:rotate(90deg);transform:rotate(90deg);-webkit-transition:transform .25s linear;transition:transform .25s linear;cursor:pointer}[_nghost-%COMP%]   .q-arrow-icon-button.q-collapsed[_ngcontent-%COMP%]{-webkit-transform:rotate(0);transform:rotate(0)}[_nghost-%COMP%]   .q-arrow-icon[_ngcontent-%COMP%]::before{content:'▶'}[_nghost-%COMP%]   .q-add-icon[_ngcontent-%COMP%]{color:#555}[_nghost-%COMP%]   .q-add-icon[_ngcontent-%COMP%]::before{content:'➕'}[_nghost-%COMP%]   .q-remove-button[_ngcontent-%COMP%]{color:#b3415d;width:31px}[_nghost-%COMP%]   .q-button-group[_ngcontent-%COMP%], [_nghost-%COMP%]   .q-switch-group[_ngcontent-%COMP%]{font-family:\"Lucida Grande\",Tahoma,Verdana,sans-serif;overflow:hidden}[_nghost-%COMP%]   .q-right-align[_ngcontent-%COMP%]{float:right}[_nghost-%COMP%]   .q-button[_ngcontent-%COMP%]{margin-left:8px;padding:0 8px;background-color:#fff}[_nghost-%COMP%]   .q-button[_ngcontent-%COMP%]:disabled{display:none}[_nghost-%COMP%]   .q-control-size[_ngcontent-%COMP%]{display:inline-block;vertical-align:top;padding-right:10px}[_nghost-%COMP%]   .q-entity-control[_ngcontent-%COMP%], [_nghost-%COMP%]   .q-field-control[_ngcontent-%COMP%], [_nghost-%COMP%]   .q-input-control[_ngcontent-%COMP%], [_nghost-%COMP%]   .q-operator-control[_ngcontent-%COMP%]{display:inline-block;padding:5px 8px;color:#555;background-color:#fff;background-image:none;border:1px solid #ccc;border-radius:4px;box-sizing:border-box;width:auto}[_nghost-%COMP%]   .q-entity-control[_ngcontent-%COMP%]:disabled, [_nghost-%COMP%]   .q-field-control[_ngcontent-%COMP%]:disabled, [_nghost-%COMP%]   .q-input-control[_ngcontent-%COMP%]:disabled, [_nghost-%COMP%]   .q-operator-control[_ngcontent-%COMP%]:disabled{border-color:transparent}[_nghost-%COMP%]   .q-entity-control[_ngcontent-%COMP%], [_nghost-%COMP%]   .q-field-control[_ngcontent-%COMP%], [_nghost-%COMP%]   .q-input-control[_ngcontent-%COMP%]:not([type=checkbox]), [_nghost-%COMP%]   .q-operator-control[_ngcontent-%COMP%]{min-height:32px;-webkit-appearance:none}[_nghost-%COMP%]   .q-button[_ngcontent-%COMP%], [_nghost-%COMP%]   .q-switch-label[_ngcontent-%COMP%]{float:left;margin-bottom:0;font-size:14px;line-height:30px;font-weight:400;text-align:center;text-shadow:none;border:1px solid rgba(0,0,0,.2);box-sizing:border-box}[_nghost-%COMP%]   .q-button[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .q-switch-label[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#f0f0f0}[_nghost-%COMP%]   .q-switch-label[_ngcontent-%COMP%]{background-color:#e4e4e4;padding:0 8px}[_nghost-%COMP%]   .q-switch-radio[_ngcontent-%COMP%]{position:absolute;clip:rect(0,0,0,0);height:1px;width:1px;border:0;overflow:hidden}[_nghost-%COMP%]   .q-switch-radio[_ngcontent-%COMP%]:checked + .q-switch-label[_ngcontent-%COMP%]{border:1px solid #619ed7;background:#fff;color:#3176b3}[_nghost-%COMP%]   .q-switch-radio[_ngcontent-%COMP%]:disabled + .q-switch-label[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .q-switch-radio[_ngcontent-%COMP%]:checked:disabled + .q-switch-label[_ngcontent-%COMP%]{display:initial;color:initial;cursor:default;border-color:transparent}[_nghost-%COMP%]   .q-invalid-ruleset[_ngcontent-%COMP%]{border:1px solid rgba(179,65,93,.5)!important;background:rgba(179,65,93,.1)!important}[_nghost-%COMP%]   .q-empty-warning[_ngcontent-%COMP%]{color:#8d252e;text-align:center}[_nghost-%COMP%]   .q-ruleset[_ngcontent-%COMP%]{border:1px solid #ccc}[_nghost-%COMP%]   .q-rule[_ngcontent-%COMP%]{border:1px solid #ccc;background:#fff}[_nghost-%COMP%]   .q-transition[_ngcontent-%COMP%]{-webkit-transition:.1s ease-in-out;transition:.1s ease-in-out}[_nghost-%COMP%]   .q-tree-container[_ngcontent-%COMP%]{width:100%;overflow:hidden;-webkit-transition:max-height .25s ease-in;transition:max-height .25s ease-in}[_nghost-%COMP%]   .q-tree-container.q-collapsed[_ngcontent-%COMP%]{max-height:0!important}[_nghost-%COMP%]   .q-tree[_ngcontent-%COMP%]{list-style:none;margin:4px 0 2px}[_nghost-%COMP%]   .q-row[_ngcontent-%COMP%]{padding:6px 8px;margin-top:6px}[_nghost-%COMP%]   .q-connector[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]   .q-connector[_ngcontent-%COMP%]::before{top:-5px;border-width:0 0 2px 2px}[_nghost-%COMP%]   .q-connector[_ngcontent-%COMP%]::after{border-width:0 0 0 2px;top:50%}[_nghost-%COMP%]   .q-connector[_ngcontent-%COMP%]::after, [_nghost-%COMP%]   .q-connector[_ngcontent-%COMP%]::before{content:'';left:-12px;border-color:#ccc;border-style:solid;width:9px;height:calc(50% + 6px);position:absolute}[_nghost-%COMP%]   .q-connector[_ngcontent-%COMP%]:last-child::after{content:none}[_nghost-%COMP%]   .q-inline-block-display[_ngcontent-%COMP%]{display:inline-block;vertical-align:top}"]}),e}(),he=function(){function e(){}return e.ɵmod=n["ɵɵdefineNgModule"]({type:e}),e.ɵinj=n["ɵɵdefineInjector"]({factory:function(t){return new(t||e)},imports:[[a.CommonModule,t.FormsModule]]}),e}();("undefined"==typeof ngJitMode||ngJitMode)&&n["ɵɵsetNgModuleScope"](he,{declarations:[fe,p,o,r,i,s,l,u,c,d],imports:[a.CommonModule,t.FormsModule],exports:[fe,p,o,r,i,s,l,u,c,d]}),e.CONTROL_VALUE_ACCESSOR=de,e.QueryArrowIconDirective=d,e.QueryBuilderComponent=fe,e.QueryBuilderModule=he,e.QueryButtonGroupDirective=s,e.QueryEmptyWarningDirective=c,e.QueryEntityDirective=i,e.QueryFieldDirective=r,e.QueryInputDirective=p,e.QueryOperatorDirective=o,e.QueryRemoveButtonDirective=u,e.QuerySwitchGroupDirective=l,e.VALIDATOR=ge,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=angular2-query-builder.umd.min.js.map